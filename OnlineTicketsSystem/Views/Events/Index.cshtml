


@model OnlineTicketsSystem.ViewModels.EventsIndexViewModel

@{
    ViewData["Title"] = "Събития";
}

<h1>Събития</h1>

<!-- (По желание) ако имаш TempData -->
@if (TempData["Message"] != null)
{
    <div class="alert alert-info">@TempData["Message"]</div>
}

<h2 class="mt-4">Предстоящи</h2>

@if (Model == null || Model.Upcoming == null || !Model.Upcoming.Any())
{
    <p>Няма предстоящи събития.</p>
}
else
{
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Заглавие</th>
                <th>Град</th>
                <th>Място</th>
                <th>Категория</th>
                <th>Дата</th>
                <th>Цена</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var e in Model.Upcoming)
            {
                <tr>
                    <td>@e.Title</td>
                    <td>@e.City</td>
                    <td>@e.Venue</td>
                    <td>@(e.Category != null ? e.Category.Name : "-")</td>
                    <td>@e.Date.ToShortDateString()</td>
                    <td>@e.Price.ToString("0.00") EUR</td>
                    <td>
                        <a class="btn btn-sm btn-outline-primary"
                           asp-controller="Events"
                           asp-action="Details"
                           asp-route-id="@e.Id">Детайли</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}

<hr class="my-4" />

<h2>Минали</h2>

@if (Model == null || Model.Past == null || !Model.Past.Any())
{
    <p>Няма минали събития.</p>
}
else
{
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Заглавие</th>
                <th>Град</th>
                <th>Място</th>
                <th>Категория</th>
                <th>Дата</th>
                <th>Цена</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var e in Model.Past)
            {
                <tr>
                    <td>@e.Title</td>
                    <td>@e.City</td>
                    <td>@e.Venue</td>
                    <td>@(e.Category != null ? e.Category.Name : "-")</td>
                    <td>@e.Date.ToShortDateString()</td>
                    <td>@e.Price.ToString("0.00") EUR</td>
                    <td>
                        <a class="btn btn-sm btn-outline-primary"
                           asp-controller="Events"
                           asp-action="Details"
                           asp-route-id="@e.Id">Детайли</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}


